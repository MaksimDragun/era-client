<div *ngIf="registrationPeriods && registrationPeriods[0]" class="row">
	<div class="row">
		<div class="col-lg-12 col-md-12 col-xs-12">
			<button data-target="#searchPanel" class="btn btn-primary" data-toggle="collapse">{{'registrations.list.filter.title' | translate}}</button>
		</div>
		<hr/>
		<div id="searchPanel" class="collapse col-lg-12 col-md-12 col-xs-12">
			<div class="row">
				<div class="col-lg-6 col-md-6 col-xs-12">
					<div class="col-lg-6 col-md-6 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.list.filter.educational-institution' | translate}}</label>
							<select *ngIf="registrationPeriods" [disabled]="registrationPeriods.length === 1"
								[(ngModel)]="selectedPeriod" name="educationInstitution"
								#educationInstitution="ngModel" class="form-control"
								(change)="onPeriodChanged()"
								data-toggle="tooltip" title="{{selectedPeriod.educationInstitution.name}}">
								<option *ngFor="let period of registrationPeriods" [ngValue]="period">
									{{period.educationInstitution.shortName}}
								</option>
							</select>
						</div>
					</div>
					<div class="col-lg-6 col-md-6 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.list.filter.specialty' | translate}}</label>
							<select (change)="onSpecialtyChanged()" required *ngIf="selectedPeriod.specialties" [(ngModel)]="selectedSpecialty" name="specialty"
								#speciality="ngModel" class="form-control">
								<option *ngFor="let spec of selectedPeriod.specialties" [ngValue]="spec">{{spec.specialty}}</option>
							</select>
						</div>
					</div>
					<div class="col-lg-6 col-md-6 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.list.filter.registration-id' | translate}}</label>
							<input required [(ngModel)]="searchQuery.registrationId" name="registrationId" #registrationId="ngModel"
								value={{searchQuery.registrationId}} type="text" class="form-control"/>
						</div>
					</div>
					<div class="col-lg-6 col-md-6 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.list.filter.enrollee-name' | translate}}</label>
							<input required [(ngModel)]="searchQuery.enrolleeName" name="name" #name="ngModel"
								value={{searchQuery.enrolleeName}} type="text" class="form-control"/>
						</div>
					</div>
				</div>
				<div class="col-lg-6 col-md-6 col-xs-12">
					<div *ngIf="selectedSpecialty" class="col-lg-12 col-md-12 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.funds-source.title' | translate}}</label>
							<div>
								<label *ngIf="!selectedSpecialty.separateByFundsSource" class="radio-inline">
									<input type="radio" value={{null}} name="fundsSource" [(ngModel)]="searchQuery.fundsSource">
									{{'registrations.funds-source.A' | translate}}
								</label>
								<label *ngFor="let source of selectedSpecialty.fundsSources" class="radio-inline">
									<input type="radio" value={{source}} name="fundsSource" [(ngModel)]="searchQuery.fundsSource">
									{{'registrations.funds-source.' + source | translate}}
								</label>
							</div>
						</div>
					</div>
					<div *ngIf="selectedSpecialty" class="col-lg-12 col-md-12 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.education-form.title' | translate}}</label>
							<div>
								<label *ngIf="!selectedSpecialty.separateByEducationForm" class="radio-inline">
									<input type="radio" value={{null}} name="educationForm" [(ngModel)]="searchQuery.educationForm">
									{{'registrations.education-form.A' | translate}}
								</label>
								<label *ngFor="let form of selectedSpecialty.educationForms" class="radio-inline">
									<input type="radio" value={{form}} name="educationForm" [(ngModel)]="searchQuery.educationForm">
									{{'registrations.education-form.' + form | translate}}
								</label>
							</div>
						</div>
					</div>
					<div *ngIf="selectedSpecialty" class="col-lg-12 col-md-12 col-xs-12">
						<div class="form-group">
							<label>{{'registrations.education-base.title' | translate}}</label>
							<div>
								<label *ngIf="!selectedSpecialty.separateByEducationForm" class="radio-inline">
									<input type="radio" value={{null}} name="educationBase" [(ngModel)]="searchQuery.educationBase">
									{{'registrations.education-base.A' | translate}}
								</label>
								<label *ngFor="let base of selectedSpecialty.educationBases" class="radio-inline">
									<input type="radio" value={{base}} name="educationBase" [(ngModel)]="searchQuery.educationBase">
									{{'registrations.education-base.' + base | translate}}
								</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
		        <div class="col-lg-12 col-md-12 col-xs-12">
					<button (click)="doSearch()" class="btn btn-primary">{{'common.search' | translate}}</button>
					<button (click)="doReset()" class="btn btn-primary">{{'common.reset' | translate}}</button>
				</div>
			</div>
   		</div>
	</div>
	<hr/>
	<div class="row">
		<div class="col-lg-10 col-md-9 col-xs-12">
			<table class="table table-striped">
				<tr>
					<th>#</th>
					<th>{{'registrations.list.full-name' | translate}}</th>
					<th>{{'registrations.list.specialty' | translate}}</th>
					<th>{{'registrations.funds-source.title' | translate}}</th>
					<th>{{'registrations.list.attestate-avg' | translate}}</th>
					<th>{{'registrations.list.registration-date' | translate}}</th>
					<th class="text-center">{{'registrations.list.contract' | translate}}</th>
				</tr>
				<tr *ngFor="let reg of registrationList; let i = index">
					<td>{{reg.registrationId}}.</td>
					<td data-toggle="tooltip" title="{{reg.lastName}} {{reg.firstName}} {{reg.middleName}}">
						{{reg.lastName}} {{reg.firstName.charAt(0)}}. {{reg.middleName.charAt(0)}}.
					</td>
					<td>{{reg.specialty}}</td>
					<td>{{'registrations.funds-source.' + reg.fundsSource | translate}}</td>
					<td>{{reg.attestateAvg|number:'.2'}}</td>
					<td>{{reg.registrationDate}}</td>
					<td class="text-center" data-toggle="tooltip" title="{{'common.download' | translate}}">
						<button type="button" (click)="downloadReport(reg.id)" class="btn btn-default" aria-label="Left Align">
							<span class="glyphicon  glyphicon-save-file" aria-hidden="true"></span>
						</button>
					</td>
				</tr>
			</table>
		</div>
		<div class="form-group col-lg-2 col-md-3 col-xs-12">
			<label>{{'registrations.list.contract-type' | translate}}</label>
			<select [(ngModel)]="selectedReportTemplate"
				name="selected-report-template"
				class="form-control">
				<option *ngFor="let tmplt of reportTemplateList" [ngValue]="tmplt">{{tmplt.fileName}}</option>
			</select>
		</div>
	</div>
</div>
